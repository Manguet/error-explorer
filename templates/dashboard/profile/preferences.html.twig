{% extends 'dashboard/base.html.twig' %}
{% form_theme form 'form/dashboard_form_theme.html.twig' %}

{% block title %}Préférences - {{ parent() }}{% endblock %}

{% block page_title %}Préférences{% endblock %}
{% block page_subtitle %}Personnalisez vos notifications et vos paramètres{% endblock %}

{% block breadcrumb_items %}
    <a href="{{ path('dashboard_profile_index') }}" class="breadcrumb__link">Mon Profil</a>
    <span class="breadcrumb__current">Préférences</span>
{% endblock %}

{% block header_actions %}
    <a href="{{ path('dashboard_profile_index') }}" class="btn btn--secondary">
        <svg class="btn__icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"/>
        </svg>
        <span class="btn__text">Retour</span>
    </a>
{% endblock %}

{% block body %}
    <div class="dashboard-section">
        <div class="dashboard-table-container">
            <div class="dashboard-table-container-header">
                <h3>Préférences</h3>
            </div>
            <div style="padding: 2rem;">
                {{ form_start(form, {'attr': {'class': 'dashboard-form'}}) }}
                    <div class="dashboard-form__field">
                        <h4 class="dashboard-form__section-header">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                            </svg>
                            Notifications par email
                        </h4>
                        
                        <div class="dashboard-form__checkbox-wrapper">
                            <div class="dashboard-form__checkbox-header">
                                <label class="dashboard-form__toggle">
                                    {{ form_widget(form.emailAlertsEnabled, {'attr': {'class': 'dashboard-form__toggle-input'}}) }}
                                    <span class="dashboard-form__toggle-slider"></span>
                                </label>
                                <label class="dashboard-form__checkbox-label">{{ form.emailAlertsEnabled.vars.label }}</label>
                            </div>
                            <p class="dashboard-form__checkbox-help">{{ form.emailAlertsEnabled.vars.help }}</p>
                            {{ form_errors(form.emailAlertsEnabled) }}
                        </div>
                        
                        <div class="dashboard-form__checkbox-wrapper">
                            <div class="dashboard-form__checkbox-header">
                                <label class="dashboard-form__toggle">
                                    {{ form_widget(form.criticalAlertsEnabled, {'attr': {'class': 'dashboard-form__toggle-input'}}) }}
                                    <span class="dashboard-form__toggle-slider"></span>
                                </label>
                                <label class="dashboard-form__checkbox-label">{{ form.criticalAlertsEnabled.vars.label }}</label>
                            </div>
                            <p class="dashboard-form__checkbox-help">{{ form.criticalAlertsEnabled.vars.help }}</p>
                            {{ form_errors(form.criticalAlertsEnabled) }}
                        </div>
                        
                        <div class="dashboard-form__checkbox-wrapper">
                            <div class="dashboard-form__checkbox-header">
                                <label class="dashboard-form__toggle">
                                    {{ form_widget(form.weeklyReportsEnabled, {'attr': {'class': 'dashboard-form__toggle-input'}}) }}
                                    <span class="dashboard-form__toggle-slider"></span>
                                </label>
                                <label class="dashboard-form__checkbox-label">{{ form.weeklyReportsEnabled.vars.label }}</label>
                            </div>
                            <p class="dashboard-form__checkbox-help">{{ form.weeklyReportsEnabled.vars.help }}</p>
                            {{ form_errors(form.weeklyReportsEnabled) }}
                        </div>
                    </div>
                    
                    <div class="dashboard-form__field">
                        <h4 class="dashboard-form__section-header">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                            </svg>
                            Sécurité
                        </h4>
                        
                        <div class="dashboard-form__checkbox-wrapper">
                            <div class="dashboard-form__checkbox-header">
                                <label class="dashboard-form__toggle">
                                    {{ form_widget(form.loginNotificationsEnabled, {'attr': {'class': 'dashboard-form__toggle-input'}}) }}
                                    <span class="dashboard-form__toggle-slider"></span>
                                </label>
                                <label class="dashboard-form__checkbox-label">{{ form.loginNotificationsEnabled.vars.label }}</label>
                            </div>
                            <p class="dashboard-form__checkbox-help">{{ form.loginNotificationsEnabled.vars.help }}</p>
                            {{ form_errors(form.loginNotificationsEnabled) }}
                        </div>
                    </div>
                    
                    <div class="dashboard-form__actions">
                        <a href="{{ path('dashboard_profile_index') }}" class="btn btn--secondary">
                            <span class="btn__text">Retour</span>
                        </a>
                        <button type="submit" class="btn btn--primary">
                            <span class="btn__text">Enregistrer</span>
                        </button>
                    </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
{% endblock %}