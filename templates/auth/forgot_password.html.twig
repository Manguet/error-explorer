{% extends 'layout/base.html.twig' %}

{% block title %}Mot de passe oublié - Error Explorer{% endblock %}
{% block description %}Réinitialisez votre mot de passe Error Explorer en toute sécurité. Recevez un lien de réinitialisation par email.{% endblock %}
{% block keywords %}mot de passe oublié, réinitialisation, récupération compte, error explorer{% endblock %}
{% block robots %}noindex, nofollow{% endblock %}

{% block body %}
    <!-- Container principal -->
    <div class="auth-container auth-container--forgot-password">

        <!-- Lien de retour -->
        <a href="{{ path('app_login') }}" class="back-link">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            <span>Retour à la connexion</span>
        </a>

        <div class="auth-wrapper">
            <!-- Header avec branding -->
            <div class="auth-header">
                <div class="hero-badge">
                    <div class="badge-dot"></div>
                    <span>Récupération sécurisée</span>
                </div>

                <h1 class="auth-title">Error Explorer</h1>
                <p class="auth-subtitle">Réinitialisez votre mot de passe en toute sécurité</p>
            </div>

            <!-- Formulaire de récupération -->
            <div class="auth-form-container">
                <!-- Messages flash -->
                {% for message in app.flashes('error') %}
                    <div class="alert alert--error" role="alert">
                        <div class="alert__icon">⚠️</div>
                        <div class="alert__content">
                            <strong>Erreur</strong>
                            <span>{{ message }}</span>
                        </div>
                    </div>
                {% endfor %}

                {% for message in app.flashes('success') %}
                    <div class="alert alert--success" role="alert">
                        <div class="alert__icon">✓</div>
                        <div class="alert__content">
                            <strong>Email envoyé</strong>
                            <span>{{ message }}</span>
                        </div>
                    </div>
                {% endfor %}

                <!-- Information de sécurité -->
                <div class="security-info">
                    <div class="security-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <circle cx="12" cy="16" r="1"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                    </div>
                    <div class="security-content">
                        <h3>Récupération sécurisée</h3>
                        <p>Nous vous enverrons un lien sécurisé pour réinitialiser votre mot de passe. Ce lien sera valide pendant 1 heure.</p>
                    </div>
                </div>

                <form method="post" class="auth-form" id="forgotPasswordForm" novalidate>
                    <div class="form-group">
                        <label for="email" class="form-label">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                            Adresse email
                        </label>
                        <div class="input-wrapper">
                            <input type="email"
                                   name="email"
                                   id="email"
                                   class="form-input"
                                   placeholder="votre@email.com"
                                   required
                                   autofocus
                                   autocomplete="email">
                            <div class="input-focus-ring"></div>
                        </div>
                        <div class="form-error" id="emailError"></div>
                        <div class="form-help">
                            Saisissez l'adresse email associée à votre compte Error Explorer
                        </div>
                    </div>

                    <!-- Instructions -->
                    <div class="instructions-section">
                        <h4>Comment ça fonctionne :</h4>
                        <ol class="instructions-list">
                            <li>
                                <div class="instruction-icon">1</div>
                                <div class="instruction-content">
                                    <strong>Saisissez votre email</strong>
                                    <span>L'adresse email associée à votre compte</span>
                                </div>
                            </li>
                            <li>
                                <div class="instruction-icon">2</div>
                                <div class="instruction-content">
                                    <strong>Vérifiez votre boîte mail</strong>
                                    <span>Vous recevrez un lien de réinitialisation</span>
                                </div>
                            </li>
                            <li>
                                <div class="instruction-icon">3</div>
                                <div class="instruction-content">
                                    <strong>Créez un nouveau mot de passe</strong>
                                    <span>Suivez le lien pour définir un nouveau mot de passe</span>
                                </div>
                            </li>
                        </ol>
                    </div>

                    <!-- Bouton de soumission -->
                    <div class="form-group">
                        <button type="submit" class="auth-submit-btn" id="submitBtn">
                            <span class="btn-text">Envoyer le lien de réinitialisation</span>
                            <div class="btn-loader">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 12a9 9 0 11-6.219-8.56"/>
                                </svg>
                            </div>
                            <svg class="btn-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                </form>

                <!-- Informations de sécurité -->
                <div class="security-details">
                    <h4>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                            <circle cx="12" cy="17" r="1"/>
                        </svg>
                        Informations importantes
                    </h4>
                    <ul class="security-list">
                        <li>Le lien de réinitialisation expire après 1 heure pour votre sécurité</li>
                        <li>Si vous ne recevez pas d'email, vérifiez votre dossier spam</li>
                        <li>Vous ne pouvez demander qu'un lien à la fois</li>
                        <li>Pour des raisons de sécurité, nous confirmons l'envoi même si l'email n'existe pas</li>
                    </ul>
                </div>

                <!-- Footer avec liens -->
                <div class="auth-footer">
                    <div class="auth-separator">
                        <span>ou</span>
                    </div>

                    <div class="auth-register-prompt">
                        <p>Vous vous souvenez de votre mot de passe ?</p>
                        <a href="{{ path('app_login') }}" class="auth-link">
                            <span>Retour à la connexion</span>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast notification container -->
    <div id="toast-container" class="toast-container"></div>
{% endblock %}