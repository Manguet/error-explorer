{% extends 'emails/base_email.html.twig' %}

{% block title %}Test d'alerte - Error Explorer{% endblock %}

{% block header_class %}email-header--success{% endblock %}

{% block status_badge %}
    <div class="status-badge">
        🧪 EMAIL DE TEST
    </div>
{% endblock %}

{% block email_title %}Test d'alerte Error Explorer{% endblock %}

{% block email_subtitle %}Votre configuration d'alertes fonctionne parfaitement !{% endblock %}

{% block body %}
    <!-- Icône de succès -->
    <div class="text-center mb-3">
        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; font-size: 40px; color: white;">
            ✓
        </div>
    </div>

    <h2 class="text-center">Félicitations ! Votre test est réussi 🎉</h2>

    <p class="text-center">Cet email confirme que votre configuration d'alertes est fonctionnelle et que vous recevrez bien les notifications d'erreurs de vos projets.</p>

    <!-- Informations de test -->
    <h3>🔍 Informations de test</h3>
    <div class="details-grid">
        <div class="detail-item">
            <div class="detail-label">Destinataire</div>
            <div class="detail-value">{{ user.fullName }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Email</div>
            <div class="detail-value">{{ user.email }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Date d'envoi</div>
            <div class="detail-value">{{ "now"|date('d/m/Y H:i') }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Statut</div>
            <div class="detail-value">✅ Validé</div>
        </div>
    </div>

    <!-- Configuration validée -->
    <div class="success-card">
        <div class="card-title">
            ✅ Configuration validée
        </div>
        <div class="card-content">
            Votre système d'alertes Error Explorer est correctement configuré.
            Vous recevrez désormais toutes les notifications importantes concernant vos projets.
        </div>
    </div>

    <!-- À propos des vraies alertes -->
    <div class="info-card">
        <div class="card-title">
            📋 À propos des alertes réelles
        </div>
        <div class="card-content">
            Les vraies alertes d'erreurs contiendront :
            <ul class="styled-list">
                <li>Informations détaillées sur l'erreur détectée</li>
                <li>Le projet et l'environnement concerné</li>
                <li>Stack trace et contexte de l'erreur</li>
                <li>Liens directs vers votre dashboard</li>
                <li>Actions recommandées pour résoudre le problème</li>
            </ul>
        </div>
    </div>

    <!-- Fonctionnalités des alertes -->
    <h3>⚡ Fonctionnalités des alertes</h3>
    <div class="details-grid">
        <div class="detail-item" style="text-align: left; padding: 20px;">
            <div style="font-size: 24px; margin-bottom: 10px;">🚨</div>
            <div class="detail-label">Temps réel</div>
            <div style="font-size: 14px; color: #64748b;">Notifications instantanées</div>
        </div>
        <div class="detail-item" style="text-align: left; padding: 20px;">
            <div style="font-size: 24px; margin-bottom: 10px;">🎯</div>
            <div class="detail-label">Personnalisées</div>
            <div style="font-size: 14px; color: #64748b;">Selon vos critères</div>
        </div>
        <div class="detail-item" style="text-align: left; padding: 20px;">
            <div style="font-size: 24px; margin-bottom: 10px;">📊</div>
            <div class="detail-label">Détaillées</div>
            <div style="font-size: 14px; color: #64748b;">Contexte complet</div>
        </div>
        <div class="detail-item" style="text-align: left; padding: 20px;">
            <div style="font-size: 24px; margin-bottom: 10px;">🔗</div>
            <div class="detail-label">Actionables</div>
            <div style="font-size: 14px; color: #64748b;">Liens directs dashboard</div>
        </div>
    </div>

    <!-- Prochaines étapes -->
    <div class="info-card">
        <div class="card-title">
            🚀 Prochaines étapes
        </div>
        <div class="card-content">
            Maintenant que vos alertes sont configurées :
            <ol style="padding-left: 20px; margin: 0;">
                <li>Continuez à utiliser vos applications normalement</li>
                <li>Les erreurs seront automatiquement détectées</li>
                <li>Vous recevrez des alertes selon vos paramètres</li>
                <li>Consultez le dashboard pour plus de détails</li>
            </ol>
        </div>
    </div>

    <!-- Bouton dashboard -->
    <div class="btn-center">
        <a href="{{ app_url }}{{ path('dashboard_index') }}" class="btn btn-primary">
            📊 Accéder au dashboard
        </a>
    </div>

    <p class="text-center">
        Votre monitoring Error Explorer est maintenant opérationnel !<br>
        <strong>L'équipe Error Explorer</strong>
    </p>
{% endblock %}

{% block additional_footer_links %}
    <a href="{{ app_url }}{{ path('dashboard_index') }}" class="footer-link">Dashboard</a>
    <a href="{{ app_url }}{{ path('home_contact') }}" class="footer-link">Support</a>
{% endblock %}

{% block footer_legal %}
    Email de test envoyé depuis Error Explorer<br>
    {{ "now"|date('d/m/Y à H:i') }} | Configuration validée ✅
{% endblock %}
