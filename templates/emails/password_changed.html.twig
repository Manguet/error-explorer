{% extends 'emails/base_email.html.twig' %}

{% block title %}Mot de passe modifi√© - Error Explorer{% endblock %}

{% block header_class %}email-header--success{% endblock %}

{% block status_badge %}
    <div class="status-badge">
        üîí MOT DE PASSE MODIFI√â
    </div>
{% endblock %}

{% block email_title %}Mot de passe modifi√© avec succ√®s{% endblock %}

{% block email_subtitle %}Votre mot de passe a √©t√© mis √† jour{% endblock %}

{% block body %}
    <h2>Bonjour {{ user.firstName }},</h2>

    <p>Nous confirmons que votre mot de passe Error Explorer a √©t√© modifi√© avec succ√®s.</p>

    <!-- D√©tails de la modification -->
    <h3>üîê D√©tails de la modification</h3>
    <div class="details-grid">
        <div class="detail-item">
            <div class="detail-label">Compte</div>
            <div class="detail-value">{{ user.email }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Date de modification</div>
            <div class="detail-value">{{ "now"|date('d/m/Y √† H:i') }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Adresse IP</div>
            <div class="detail-value">{{ ip_address|default('Non disponible') }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Navigateur</div>
            <div class="detail-value">{{ user_agent|slice(0, 30)|default('Non disponible') }}{% if user_agent and user_agent|length > 30 %}...{% endif %}</div>
        </div>
    </div>

    <!-- Confirmation de s√©curit√© -->
    <div class="success-card">
        <div class="card-title">
            ‚úÖ Modification confirm√©e
        </div>
        <div class="card-content">
            Votre nouveau mot de passe est maintenant actif et s√©curis√©.
            Vous pouvez l'utiliser d√®s maintenant pour vous connecter √† votre compte Error Explorer.
        </div>
    </div>

    <!-- Bouton de connexion -->
    <div class="btn-center">
        <a href="{{ app.request.schemeAndHttpHost }}{{ path('app_login') }}" class="btn btn-primary">
            üîê Se connecter avec le nouveau mot de passe
        </a>
    </div>

    <!-- Conseils de s√©curit√© -->
    <h3>üõ°Ô∏è Conseils de s√©curit√©</h3>
    <div class="info-card">
        <div class="card-content">
            <ul class="styled-list">
                <li>Utilisez un mot de passe unique pour Error Explorer</li>
                <li>Activez l'authentification √† deux facteurs si disponible</li>
                <li>Ne partagez jamais vos identifiants</li>
                <li>D√©connectez-vous des appareils partag√©s</li>
                <li>Surveillez r√©guli√®rement l'activit√© de votre compte</li>
            </ul>
        </div>
    </div>

    <!-- Activit√© suspecte -->
    <div class="warning-card">
        <div class="card-title">
            ‚ö†Ô∏è Vous n'avez pas effectu√© cette modification ?
        </div>
        <div class="card-content">
            Si vous n'√™tes pas √† l'origine de cette modification de mot de passe, votre compte pourrait √™tre compromis.
            <strong>Contactez imm√©diatement notre √©quipe support.</strong>
        </div>
    </div>

    <!-- Bouton de support d'urgence -->
    <div class="btn-center">
        <a href="{{ app.request.schemeAndHttpHost }}{{ path('home_contact') }}?subject=Compte compromis" class="btn btn-danger">
            üö® Signaler un probl√®me de s√©curit√©
        </a>
    </div>

    <!-- Informations sur la session -->
    <div class="info-card">
        <div class="card-title">
            üì± Sessions actives
        </div>
        <div class="card-content">
            Pour votre s√©curit√©, nous vous recommandons de vous d√©connecter de tous les appareils
            et de vous reconnecter avec votre nouveau mot de passe.
        </div>
    </div>

    <!-- Acc√®s au tableau de bord -->
    <div class="btn-center">
        <a href="{{ app.request.schemeAndHttpHost }}{{ path('dashboard_index') }}" class="btn btn-secondary">
            üìä Acc√©der au dashboard
        </a>
        <a href="{{ app.request.schemeAndHttpHost }}{{ path('profile_security') }}" class="btn btn-secondary">
            üîí Param√®tres de s√©curit√©
        </a>
    </div>

    <p class="text-center">
        Votre s√©curit√© est notre priorit√©.<br>
        <strong>L'√©quipe Error Explorer</strong>
    </p>
{% endblock %}

{% block additional_footer_links %}
    <a href="{{ app.request.schemeAndHttpHost }}{{ path('app_login') }}" class="footer-link">Se connecter</a>
    <a href="{{ app.request.schemeAndHttpHost }}{{ path('home_contact') }}" class="footer-link">Support</a>
{% endblock %}

{% block footer_legal %}
    Notification de modification de mot de passe pour Error Explorer<br>
    {{ "now"|date('d/m/Y √† H:i') }} | Si vous n'√™tes pas √† l'origine de cette modification, contactez-nous imm√©diatement
{% endblock %}
