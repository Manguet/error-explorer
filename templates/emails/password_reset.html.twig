{% extends 'emails/base_email.html.twig' %}

{% block title %}RÃ©initialisation du mot de passe - Error Explorer{% endblock %}

{% block header_class %}email-header--info{% endblock %}

{% block status_badge %}
    <div class="status-badge">
        ğŸ”‘ RÃ‰INITIALISATION
    </div>
{% endblock %}

{% block email_title %}RÃ©initialisation du mot de passe{% endblock %}

{% block email_subtitle %}CrÃ©ez un nouveau mot de passe pour votre compte{% endblock %}

{% block body %}
    <h2>Bonjour {{ user.firstName }},</h2>

    <p>Vous avez demandÃ© la rÃ©initialisation de votre mot de passe Error Explorer. Utilisez le lien ci-dessous pour crÃ©er un nouveau mot de passe sÃ©curisÃ©.</p>

    <!-- Bouton principal de rÃ©initialisation -->
    <div class="btn-center">
        <a href="{{ reset_url }}" class="btn btn-primary btn-large">
            ğŸ”‘ RÃ©initialiser mon mot de passe
        </a>
    </div>

    <!-- Information sur l'expiration -->
    <div class="warning-card">
        <div class="card-title">
            â° Important : Lien temporaire
        </div>
        <div class="card-content">
            Ce lien expire le <strong>{{ expires_at|date('d/m/Y Ã  H:i') }}</strong>.<br>
            Vous avez <strong>{{ (expires_at.timestamp - "now"|date('U')) // 3600 }} heures</strong> pour crÃ©er votre nouveau mot de passe.
        </div>
    </div>

    <!-- DÃ©tails de la demande -->
    <h3>ğŸ“‹ DÃ©tails de la demande</h3>
    <div class="details-grid">
        <div class="detail-item">
            <div class="detail-label">Compte</div>
            <div class="detail-value">{{ user.email }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Adresse IP</div>
            <div class="detail-value">{{ ip_address|default('Non disponible') }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Demande effectuÃ©e</div>
            <div class="detail-value">{{ "now"|date('d/m/Y Ã  H:i') }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Expire le</div>
            <div class="detail-value">{{ expires_at|date('d/m/Y Ã  H:i') }}</div>
        </div>
    </div>

    <!-- Lien de secours -->
    <h3>ğŸ”— Lien de secours</h3>
    <div class="info-card">
        <div class="card-title ">Si le bouton ne fonctionne pas</div>
        <div class="card-content ">
            <p>Vous pouvez copier et coller ce lien dans votre navigateur :</p>
            <div class="code-block code-block-small">{{ reset_url }}</div>
        </div>
    </div>

    <!-- Conseils pour un mot de passe sÃ©curisÃ© -->
    <h3>ğŸ›¡ï¸ CrÃ©ez un mot de passe sÃ©curisÃ©</h3>
    <div class="success-card">
        <div class="card-title ">
            âœ… Recommandations
        </div>
        <div class="card-content ">
            <ul class="styled-list">
                <li>Au moins 8 caractÃ¨res (idÃ©alement 12 ou plus)</li>
                <li>MÃ©lange de lettres majuscules et minuscules</li>
                <li>Inclure des chiffres et des caractÃ¨res spÃ©ciaux</li>
                <li>Ã‰viter les informations personnelles</li>
                <li>Utiliser un mot de passe unique pour Error Explorer</li>
            </ul>
        </div>
    </div>

    <!-- SÃ©curitÃ© -->
    <div class="info-card">
        <div class="card-title ">
            ğŸ”’ SÃ©curitÃ©
        </div>
        <div class="card-content ">
            Si vous n'avez pas demandÃ© cette rÃ©initialisation, vous pouvez ignorer cet email en toute sÃ©curitÃ©.
            Votre mot de passe actuel reste inchangÃ© et aucune action ne sera entreprise.
        </div>
    </div>

    <!-- ActivitÃ© suspecte -->
    <div class="warning-card">
        <div class="card-title ">
            âš ï¸ Vous n'avez pas fait cette demande ?
        </div>
        <div class="card-content ">
            Si cette demande de rÃ©initialisation n'est pas de votre fait, quelqu'un pourrait tenter d'accÃ©der Ã  votre compte.
            Contactez immÃ©diatement notre Ã©quipe support.
        </div>
    </div>

    <!-- Boutons secondaires -->
    <div class="btn-center">
        <a href="{{ app_url }}/contact?subject=SÃ©curitÃ© compte" class="btn btn-secondary">
            ğŸš¨ Signaler un problÃ¨me
        </a>
        <a href="{{ app_url }}/login" class="btn btn-secondary">
            ğŸ” Connexion normale
        </a>
    </div>

    <!-- Que se passe-t-il aprÃ¨s -->
    <div class="info-card">
        <div class="card-title ">
            ğŸ“ Que se passe-t-il aprÃ¨s ?
        </div>
        <div class="card-content ">
            <ol class="styled-ordered-list">
                <li>Cliquez sur le lien de rÃ©initialisation</li>
                <li>CrÃ©ez votre nouveau mot de passe sÃ©curisÃ©</li>
                <li>Confirmez votre nouveau mot de passe</li>
                <li>Connectez-vous avec vos nouveaux identifiants</li>
            </ol>
        </div>
    </div>

    <p class="text-center">
        Votre sÃ©curitÃ© est notre prioritÃ©.<br>
        <strong>L'Ã©quipe Error Explorer</strong>
    </p>
{% endblock %}

{% block additional_footer_links %}
    <a href="{{ app_url }}/login" class="footer-link">Se connecter</a>
    <a href="{{ app_url }}/contact" class="footer-link">Support sÃ©curisÃ©</a>
{% endblock %}

{% block footer_legal %}
    Demande de rÃ©initialisation de mot de passe pour Error Explorer<br>
    {{ "now"|date('d/m/Y Ã  H:i') }} | Expire le {{ expires_at|date('d/m/Y Ã  H:i') }} | Si vous n'Ãªtes pas Ã  l'origine de cette demande, ignorez cet email
{% endblock %}
