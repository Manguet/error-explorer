{% extends 'emails/base_email.html.twig' %}

{% block title %}Paiement confirm√© - Error Explorer{% endblock %}

{% block header_class %}email-header--success{% endblock %}

{% block status_badge %}
    <div class="status-badge">
        ‚úÖ PAIEMENT CONFIRM√â
    </div>
{% endblock %}

{% block email_title %}Paiement confirm√© !{% endblock %}

{% block email_subtitle %}Votre abonnement est maintenant actif{% endblock %}

{% block body %}
    <h2>Merci {{ user.firstName }} ! üéâ</h2>

    <p>Votre paiement a √©t√© trait√© avec succ√®s. Votre abonnement Error Explorer est maintenant actif et vous pouvez profiter de toutes les fonctionnalit√©s de votre plan.</p>

    <!-- D√©tails de l'abonnement -->
    <h3>üí≥ D√©tails de votre abonnement</h3>
    <div class="details-grid">
        <div class="detail-item">
            <div class="detail-label">Plan</div>
            <div class="detail-value">{{ subscription.plan.name }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Facturation</div>
            <div class="detail-value">{{ subscription.isYearly ? 'Annuelle' : 'Mensuelle' }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Montant</div>
            <div class="detail-value">{{ subscription.formattedAmount }}</div>
        </div>
        <div class="detail-item">
            <div class="detail-label">Prochaine facturation</div>
            <div class="detail-value">{{ subscription.currentPeriodEnd | date('d/m/Y') }}</div>
        </div>
    </div>

    <!-- P√©riode actuelle -->
    <div class="info-card">
        <div class="card-title">
            üìÖ P√©riode actuelle
        </div>
        <div class="card-content">
            <strong>Du {{ subscription.currentPeriodStart | date('d/m/Y') }} au {{ subscription.currentPeriodEnd | date('d/m/Y') }}</strong><br>
            Votre abonnement est actif et toutes les fonctionnalit√©s sont disponibles.
        </div>
    </div>

    <!-- P√©riode d'essai si applicable -->
    {% if subscription.isOnTrial %}
        <div class="success-card">
            <div class="card-title">
                üéâ P√©riode d'essai activ√©e !
            </div>
            <div class="card-content">
                Vous b√©n√©ficiez de {{ subscription.trialDaysRemaining }} jours d'essai gratuit.
                Votre premier paiement aura lieu le {{ subscription.trialEnd | date('d/m/Y') }}.
            </div>
        </div>
    {% endif %}

    <!-- Bouton d'action principal -->
    <div class="btn-center">
        <a href="{{ app.request.schemeAndHttpHost }}{{ path('dashboard_index') }}" class="btn btn-primary" style="font-size: 18px; padding: 16px 32px;">
            üöÄ Acc√©der √† mon dashboard
        </a>
    </div>

    <!-- Fonctionnalit√©s disponibles -->
    <h3>‚ö° Vous pouvez maintenant</h3>
    <div class="success-card">
        <div class="card-content">
            <ul class="styled-list">
                <li>Cr√©er {{ subscription.plan.maxProjects == -1 ? 'un nombre illimit√© de' : 'jusqu\'√† ' ~ subscription.plan.maxProjects }} projets</li>
                <li>Recevoir {{ subscription.plan.maxMonthlyErrors == -1 ? 'un nombre illimit√© d\'' : 'jusqu\'√† ' ~ subscription.plan.maxMonthlyErrors }} erreurs par mois</li>
                <li>Conserver vos donn√©es pendant {{ subscription.plan.dataRetentionDays }} jours</li>
                {% if subscription.plan.emailAlerts %}
                    <li>Configurer des alertes par email</li>
                {% endif %}
                {% if subscription.plan.slackIntegration %}
                    <li>Int√©grer avec Slack et Discord</li>
                {% endif %}
                {% if subscription.plan.apiAccess %}
                    <li>Utiliser l'API compl√®te</li>
                {% endif %}
                <li>B√©n√©ficier du support technique prioritaire</li>
            </ul>
        </div>
    </div>

    <!-- Prochaines √©tapes -->
    <h3>üìã Prochaines √©tapes</h3>
    <div class="info-card">
        <div class="card-title">
            üõ†Ô∏è Pour bien d√©marrer
        </div>
        <div class="card-content">
            <ol style="padding-left: 20px; margin: 0;">
                <li>Cr√©ez votre premier projet dans le dashboard</li>
                <li>Int√©grez notre SDK dans votre application</li>
                <li>Configurez vos alertes personnalis√©es</li>
                <li>Explorez les analytics de vos erreurs</li>
            </ol>
        </div>
    </div>

    <!-- Boutons secondaires -->
    <div class="btn-center">
        <a href="{{ app.request.schemeAndHttpHost }}{{ path('integration') }}" class="btn btn-secondary">
            üìö Guide d'int√©gration
        </a>
        <a href="{{ app.request.schemeAndHttpHost }}{{ path('billing_dashboard') }}" class="btn btn-secondary">
            üí≥ G√©rer mon abonnement
        </a>
    </div>

    <!-- Support -->
    <div class="info-card">
        <div class="card-title">
            üí¨ Besoin d'aide ?
        </div>
        <div class="card-content">
            Notre √©quipe support est l√† pour vous accompagner dans la prise en main d'Error Explorer.
            N'h√©sitez pas √† nous contacter pour toute question !
        </div>
    </div>

    <p class="text-center">
        Bienvenue dans la famille Error Explorer !<br>
        <strong>L'√©quipe Error Explorer</strong>
    </p>
{% endblock %}

{% block additional_footer_links %}
    <a href="{{ app.request.schemeAndHttpHost }}{{ path('billing_dashboard') }}" class="footer-link">Facturation</a>
    <a href="{{ app.request.schemeAndHttpHost }}{{ path('integration') }}" class="footer-link">Int√©gration</a>
{% endblock %}

{% block footer_legal %}
    Confirmation de paiement pour Error Explorer<br>
    {{ "now"|date('d/m/Y √† H:i') }} | Abonnement: {{ subscription.plan.name }}
{% endblock %}
